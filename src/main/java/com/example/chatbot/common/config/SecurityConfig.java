package com.example.chatbot.common.config;import com.example.chatbot.common.filter.JwtAuthenticationFilter;import jakarta.servlet.DispatcherType;import lombok.RequiredArgsConstructor;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.security.config.annotation.web.builders.HttpSecurity;import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;import org.springframework.security.config.http.SessionCreationPolicy;import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;import org.springframework.security.crypto.password.PasswordEncoder;import org.springframework.security.web.SecurityFilterChain;import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;/** * Spring Security 설정 * * @author : 오승훈 * @fileName : SecurityConfig * @since : 2026-02-22 */@Configuration@EnableWebSecurity@RequiredArgsConstructorpublic class SecurityConfig {  private final JwtAuthenticationFilter jwtAuthenticationFilter;  @Bean  public PasswordEncoder passwordEncoder() {    return new BCryptPasswordEncoder();  }  @Bean  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {    http        // CSRF 비활성화 (JWT 사용)        .csrf(AbstractHttpConfigurer::disable)        // 세션 사용 안 함        .sessionManagement(session ->            session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))        // 경로별 권한 설정        .authorizeHttpRequests(auth -> auth            .dispatcherTypeMatchers(DispatcherType.ASYNC).permitAll() // swagger에서 실시간 스트리밍 테스트 위해            .requestMatchers("/api/auth/**").permitAll()  // 회원가입/로그인은 인증 불필요            .requestMatchers("/swagger-ui/**","/swagger-ui.html", "/v3/api-docs/**").permitAll()            .requestMatchers("/error").permitAll()            .anyRequest().authenticated()        )        .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);    return http.build();  }}