package com.example.chatbot.common.dto;import com.example.chatbot.common.exception.ErrorCode;import java.time.LocalDateTime;import java.util.*;import java.util.stream.Collectors;import lombok.AccessLevel;import lombok.Getter;import lombok.NoArgsConstructor;import org.springframework.validation.BindingResult;/** * 에러 응답 DTO * * @author : 오승훈 * @fileName : ErrorResponse * @since : 2026-02-12 */@Getter@NoArgsConstructor(access = AccessLevel.PROTECTED)public class ErrorResponse {  private String code;  private String message;  private int status;  private LocalDateTime timestamp;  private List<FieldError> errors;  private ErrorResponse(ErrorCode errorCode) {    this.code = errorCode.getCode();    this.message = errorCode.getMessage();    this.status = errorCode.getStatus().value();    this.timestamp = LocalDateTime.now();    this.errors = new ArrayList<>();  }  private ErrorResponse(ErrorCode errorCode, String message) {    this.code = errorCode.getCode();    this.message = message;    this.status = errorCode.getStatus().value();    this.timestamp = LocalDateTime.now();    this.errors = new ArrayList<>();  }  private ErrorResponse(ErrorCode errorCode, List<FieldError> errors) {    this.code = errorCode.getCode();    this.message = errorCode.getMessage();    this.status = errorCode.getStatus().value();    this.timestamp = LocalDateTime.now();    this.errors = errors;  }  public static ErrorResponse of(ErrorCode errorCode) {    return new ErrorResponse(errorCode);  }  public static ErrorResponse of(ErrorCode errorCode, String message) {    return new ErrorResponse(errorCode, message);  }  public static ErrorResponse of(ErrorCode errorCode, BindingResult bindingResult) {    return new ErrorResponse(errorCode, FieldError.of(bindingResult));  }  @Getter  @NoArgsConstructor(access = AccessLevel.PROTECTED)  public static class FieldError {    private String field;    private String value;    private String reason;    private FieldError(String field, String value, String reason) {      this.field = field;      this.value = value;      this.reason = reason;    }    public static List<FieldError> of(BindingResult bindingResult) {      return bindingResult.getFieldErrors().stream()          .map(error -> new FieldError(              error.getField(),              error.getRejectedValue() == null ? "" : error.getRejectedValue().toString(),              error.getDefaultMessage()          ))          .collect(Collectors.toList());    }  }}